---
name: encapsulation
category: core
description: カプセル化の定義と判断基準
---

## カプセル化の定義と判断基準

### 定義
カプセル化とは、関連するデータとそれを操作するロジックを一つのモジュール（クラス）にまとめ、
内部実装の詳細を外部から隠蔽することで、変更の影響範囲を局所化する設計原則。

### 判断基準
1. **データとロジックの同居**
   - データを持つクラスがそのデータを操作するロジックも持っているか
   - getterで取得したデータを外部で加工していないか

2. **情報隠蔽**
   - 内部状態が不必要に公開されていないか
   - publicフィールドやpublicなgetter/setterが乱用されていないか

3. **不変条件の保護**
   - クラスの不変条件（invariant）が外部から破壊されない構造か
   - コンストラクタやファクトリメソッドでのバリデーションがあるか

4. **Tell, Don't Ask原則**
   - オブジェクトに問い合わせて判断するのではなく、命令しているか
   - 例: `if (obj.getValue() > 10)` ではなく `obj.doSomething()`

### 欠陥パターン
- フィールドの直接アクセス
- getter経由でデータを取得し、外部で計算・判断
- ドメインロジックがUseCase/Serviceに流出
- 貧血ドメインモデル（Anemic Domain Model）
