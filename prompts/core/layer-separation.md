---
name: layer-separation
category: core
description: 技術レイヤ間の関心の分離
---

## 技術レイヤ間の関心の分離

### 定義
アプリケーションを責務に応じた層（レイヤ）に分割し、
各層の責務を明確にすることで依存関係を制御する設計原則。

### 一般的なレイヤ構成
1. **プレゼンテーション層**
   - ユーザーインターフェース、API エンドポイント
   - 入力の受付、出力の整形

2. **アプリケーション層（UseCase層）**
   - ユースケースの調整、トランザクション管理
   - ドメインオブジェクトの協調

3. **ドメイン層**
   - ビジネスルール、ビジネスロジック
   - エンティティ、値オブジェクト、ドメインサービス

4. **インフラストラクチャ層**
   - 永続化、外部システム連携
   - フレームワーク固有のコード

### 判断基準
1. **依存の方向**
   - 上位層から下位層への依存のみか
   - ドメイン層が他の層に依存していないか

2. **層の責務違反**
   - Controller内でSQLを直接実行していないか
   - ドメインオブジェクトがHTTPリクエストを意識していないか
   - UseCaseがフレームワーク固有の機能に依存していないか

### 欠陥パターン
- ドメイン層からインフラ層への依存
- Controller内でのビジネスロジック実装
- レイヤをスキップした呼び出し
