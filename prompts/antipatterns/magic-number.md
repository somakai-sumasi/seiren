---
name: magic-number
category: antipatterns
description: マジックナンバーの定義と検出基準
---

## マジックナンバー

### 定義
マジックナンバーとは、コード中に直接記述された意味不明なリテラル値。
数値だけでなく、意図が不明な文字列リテラルも含む。

### 検出基準
1. **意味不明な数値**
   - `if (status == 3)` のような意図不明な数値比較
   - `for (i = 0; i < 7; i++)` のような根拠不明なループ回数
   - 計算式内の説明のない係数

2. **散在するリテラル**
   - 同じ値が複数箇所にハードコード
   - 変更時に全箇所を修正する必要がある

3. **意図不明な文字列**
   - `if (type == "A")` のような意味不明な文字列比較
   - 設定値やキー名の直接記述

### 許容されるケース
- 0, 1, -1 などの自明な値
- 配列のインデックス
- 明確な文脈がある場合（100% = 100）

### 改善方針
- 定数として名前をつける
- Enumで意味を表現
- 設定ファイルへの外出し
