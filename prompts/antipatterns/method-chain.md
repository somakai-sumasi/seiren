---
name: method-chain
category: antipatterns
description: メソッドチェイン濫用の定義と検出基準
---

## メソッドチェイン濫用

### 定義
メソッドチェインの濫用とは、流れるようなインターフェース（Fluent Interface）の誤用により、
内部実装への依存や可読性の低下を招くパターン。

### 検出基準
1. **デメテルの法則違反**
   - `a.getB().getC().doSomething()` のような連鎖
   - 直接の協力者以外のオブジェクトにアクセス

2. **内部構造の露出**
   - チェインを通じて内部オブジェクトが外部に漏れている
   - 中間オブジェクトの変更がチェイン全体に影響

3. **責務の不明確化**
   - どのオブジェクトが処理の責任を持つか不明瞭
   - エラー発生時の原因特定が困難

### 適切な使用例
- Builderパターン（同一オブジェクトを返す）
- Stream/Collection操作（言語標準の機能）
- テストのアサーション

### 欠陥の影響
- 結合度の増加
- 変更時の影響範囲が広い
- NullPointerException等の発生リスク
